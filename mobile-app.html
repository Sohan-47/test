<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ABLE - Mobile</title>
    <script src="https://unpkg.com/mathlive"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="mobile-style.css">
</head>
<body>
    <div id="brand-header"><h1>ABLE</h1><p>Mobile</p></div>
    <div id="mode-status">MODE: TEXT</div>
    
    <div id="drawing-toolbar" class="toolbar collapsed">
        <div class="toolbar-header">
            <svg viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
        </div>
        <div class="toolbar-content">
            <div class="tool-btn active" id="tool-pointer"><svg viewBox="0 0 24 24"><path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"/></svg></div>
            <div class="tool-btn" id="tool-pen"><svg viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"/></svg></div>
            <div class="tool-btn" id="tool-line"><svg viewBox="0 0 24 24"><line x1="5" y1="19" x2="19" y2="5"/></svg></div>
            <div class="tool-btn" id="tool-circle"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/></svg></div>
            <div class="tool-btn" id="tool-curve"><svg viewBox="0 0 24 24"><path d="M3 21c3-9 18-9 18-18"/></svg></div>
            <div class="tool-btn" id="tool-eraser"><svg viewBox="0 0 24 24"><path d="M16.24 3.56l4.95 4.94c.78.79.78 2.05 0 2.84L12 20.53a4.008 4.008 0 0 1-5.66 0L2.81 17c-.78-.79-.78-2.05 0-2.84l10.6-10.6c.79-.78 2.05-.78 2.83 0"/></svg></div>
            <div class="tool-btn" id="tool-arrow"><svg viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg></div>
        </div>
    </div>
    
    <div id="canvas-toolbar" class="toolbar collapsed">
        <div class="toolbar-header">
            <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 21V9"/></svg>
        </div>
        <div class="toolbar-content">
            <div class="tool-btn" id="tool-grid"><svg viewBox="0 0 24 24"><line x1="3" y1="12" x2="21" y2="12"/><line x1="12" y1="3" x2="12" y2="21"/></svg></div>
            <div class="tool-btn" id="tool-clear"><svg viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg></div>
            <div class="tool-btn" id="tool-undo"><svg viewBox="0 0 24 24"><path d="M3 7v6h6M21 17a9 9 0 00-9-9 9 9 0 00-9 9"/></svg></div>
        </div>
    </div>
    
    <div id="bottom-controls">
        <div class="bottom-btn" id="btn-help">Help</div>
        <div class="bottom-btn" id="btn-export-able">Save</div>
        <div class="bottom-btn" id="btn-import-able">Load</div>
        <div class="bottom-btn" id="btn-export-pdf">PDF</div>
    </div>
    
    <div id="viewport">
        <div id="canvas-container">
            <div id="grid-layer"></div>
            <div id="canvas-area"></div>
            <svg id="arrow-layer">
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#4da6ff" />
                    </marker>
                </defs>
            </svg>
            <canvas id="drawing-layer"></canvas>
            <canvas id="preview-layer"></canvas>
        </div>
    </div>
    
    <div id="text-input-modal">
        <div id="text-input-header">
            <div id="text-input-title">Edit LaTeX</div>
            <div id="text-input-done">Done</div>
        </div>
        <textarea id="text-input-area" placeholder="Type LaTeX here... Shortcuts will auto-convert after 0.5s pause."></textarea>
        <div id="latex-preview"><div id="latex-preview-content"></div></div>
    </div>
    
    <div id="help-modal">
        <div id="help-content">
            <span id="help-close">&times;</span>
            <h2>ABLE Mobile - Quick Guide</h2>
            <div class="help-section"><h3>Gestures</h3><p><strong>Double tap:</strong> Create math box<br><strong>Tap box:</strong> Edit<br><strong>Drag handle:</strong> Move<br><strong>Pinch:</strong> Zoom<br><strong>One finger drag:</strong> Pan<br><strong>Two finger tap (arrow tool):</strong> Draw arrow</p></div>
            <div class="help-section"><h3>Mode</h3><p>Tap top-right to toggle TEXT/MATH mode</p></div>
            <div class="help-section"><h3>Shortcuts</h3><p>Type and wait 0.5s: alpha, beta, int, sum, lim, sq, fr, RR, ZZ, impl, vec, hat, 22mat, 33det... See PC for full list</p></div>
        </div>
    </div>
    
    <div id="toast"></div>
    <input type="file" id="file-input" accept=".able" style="display: none;">
    
    <script src="mobile-app.js"></script>
</body>
</html>
